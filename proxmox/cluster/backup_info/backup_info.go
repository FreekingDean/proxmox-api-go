// File generated by proxmox json schema, DO NOT EDIT

package backup_info

import (
	"context"
)

const (
	Type_QEMU Type = "qemu"
	Type_LXC  Type = "lxc"
)

type Type string

func PtrType(i Type) *Type {
	return &i
}

type HTTPClient interface {
	Do(context.Context, string, string, interface{}, interface{}) error
}

type Client struct {
	httpClient HTTPClient
}

func New(c HTTPClient) *Client {
	return &Client{
		httpClient: c,
	}
}

type IndexResponse struct {
	Subdir string `url:"subdir" json:"subdir"` // API sub-directory endpoint

}

type GetGuestsNotInBackupNotBackedUpResponse struct {
	Type Type `url:"type" json:"type"` // Type of the guest.
	Vmid int  `url:"vmid" json:"vmid"` // VMID of the guest.

	// The following parameters are optional
	Name *string `url:"name,omitempty" json:"name,omitempty"` // Name of the guest
}

// Index Index for backup info related endpoints
func (c *Client) Index(ctx context.Context) ([]IndexResponse, error) {
	var resp []IndexResponse

	err := c.httpClient.Do(ctx, "/cluster/backup-info", "GET", &resp, nil)
	return resp, err
}

// GetGuestsNotInBackupNotBackedUp Shows all guests which are not covered by any backup job.
func (c *Client) GetGuestsNotInBackupNotBackedUp(ctx context.Context) ([]GetGuestsNotInBackupNotBackedUpResponse, error) {
	var resp []GetGuestsNotInBackupNotBackedUpResponse

	err := c.httpClient.Do(ctx, "/cluster/backup-info/not-backed-up", "GET", &resp, nil)
	return resp, err
}
